import xml.etree.ElementTree as ET
from qiskit import QuantumCircuit, transpile
from qiskit_aer import AerSimulator
from qiskit.visualization import plot_histogram
from qiskit.quantum_info import Statevector

# Use Aer's AerSimulator
simulator = AerSimulator()

# Create a Quantum Circuit acting on the q register
circuit = QuantumCircuit(1, 1)

# Add a H gate on qubit 0
circuit.h(0)

# Add another
circuit.h(0)

# Compile the circuit for the support instruction set (basis_gates)
# and topology (coupling_map) of the backend
compiled_circuit = transpile(circuit, simulator)
compiled_circuit.save_statevector()

outputstate = simulator.run(compiled_circuit, shots=1000).result().get_statevector()
#print("statevector",Statevector(result.get_statevector()).probabilities())
probs = Statevector(outputstate).probabilities()
print(probs)
# Execute the circuit on the aer simulator
job = simulator.run(compiled_circuit, shots=1000)

# Grab results from the job
result = job.result()

print("probs", probs)
# Returns counts
counts = result.get_counts(compiled_circuit)
print("\nTotal count for 0 and 1 are:", counts.get('0'), counts.get('1'))
